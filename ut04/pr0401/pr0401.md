# üìÑ PR0401: Implantaci√≥n del dominio

## ‚úÖ Objetivos
Eres el nuevo administrador de sistemas del **IES San Andr√©s**. El centro ha decidido centralizar la gesti√≥n de usuarios y equipos, y tu primera tarea es implantar un dominio de Active Directory.

El nombre de dominio interno ser√°: **`iessanandres.local`**

El centro tiene una estructura organizativa que debe reflejarse en el directorio activo para facilitar la gesti√≥n. La estructura acad√©mica se divide en:

- **Familia de Administraci√≥n:**
  - Ciclo Superior de Administraci√≥n y Finanzas (AFI)
  - Ciclo Superior de Asistencia a la Direcci√≥n (GAD)
  - Ciclo Medio de Gesti√≥n Administrativa (SCO)
- **Familia de Inform√°tica:**
  - Ciclo Superior de Desarrollo de Aplicaciones Multiplataforma (DAM)
  - Ciclo Superior de Desarrollo de Aplicaciones Web (DAW)
  - Ciclo Superior de Administraci√≥n de Sistemas (ASIR)
  - Ciclo Medio de Sistemas Microinform√°ticos y Redes (SMR)
  - Curso de Especializaci√≥n en Inteligencia Artificial y Big Data (IAyBD)

Adem√°s de los alumnos y profesores de estas familias, tambi√©n existe el personal de administraci√≥n y servicios (PAS).

## üìå 1. Promoci√≥n del controlador de dominio
En nuestra m√°quina de **Windows Server 2025**, pondremos la **IP est√°tica** en nuestro adaptador de **s√≥lo anfitri√≥n** en **VirtualBox**. Vamos al **CMD** y ponemos `ipconfig`. Luego, vamos a **`Panel de control ‚Üí Redes e internet ‚Üí Centro de redes y recursos compartidos`** y en el men√∫ de la izquierda clicamos en **`Cambiar configuraci√≥n del adaptador`**. Clicamos en nuestro adaptador y pondremos la IP. En este caso la IP ser√° de la siguiente manera:

![IP Windows Server](Imagenes/Ej1.png)

Ahora, instalamos el servicio de Active Directory **(AD)**. Para ello, vamos al apartado de **Herramientas** y luego en **Agregar roles y caracter√≠sticas**.

![Agregar roles y caracter√≠sticas](Imagenes/Ej1_1.png)

En el siguiente punto de la instalaci√≥n seleccionamos **Servicios de dominio de Active Directory** y a√±adimos las caracter√≠sticas que nos saldr√° en una ventana al seleccionarlo.

![Agregar roles y caracter√≠sticas](Imagenes/Ej1_2.png)

Ahora, en este apartado, seleccionamos la casilla para que se reinicien los servicios en caso necesario y le damos a **Instalar**.

![Reinciar servicio](Imagenes/Ej1_3.png)

Una vez instalado, tendremos que ir al apartado de notificaciones (porque nos saldr√° con un signo de peligro) y clicaremos en **Promover este servidor a controlador de dominio**.

![Aviso de promover servidor](Imagenes/Ej1_4.png)

Cuando hayamos clicado, nos saldr√° una ventana para configurar el dominio.

En la primera ventana, para crear un nuevo dominio, seleccionamos **Agregar un nuevo bosque** y le pondremos el nombre de `iessanandres.local`.

![Configuraci√≥n de implementaci√≥n](Imagenes/Ej1_5.png)

Pondremos la contrase√±a para nuestro nuevo bosque, dejamos el nivel funcional tal cual est√°, si lo cambiamos de versi√≥n, se quedar√° con las funciones de esa versi√≥n.

![Opciones del controlador de dominio](Imagenes/Ej1_6.png)

Aqu√≠, solamente clicamos en Siguiente, no podemos hacer clic en **Crear delegaci√≥n DNS**.

![Opciones de DNS](Imagenes/Ej1_7.png)

En esta parte, nos sale el nombre que tendr√° el dominio cuando se vaya a iniciar sesi√≥n. Si es un usuario que ya est√° dentro, cuando vaya a iniciar sesi√≥n, en vez de `"usuario"`, aparecer√° como `"IESSANANDRES\'usuario'"`. En mi caso, lo dejar√© como viene por defecto.

![Opciones adicionales](Imagenes/Ej1_8.png)

En este apartado, ser√° para saber d√≥nde se va a encontrar las rutas de configuraci√≥n y del dominio. Podemos dejarlo como viene.

![Rutas de acceso](Imagenes/Ej1_9.png)

En la siguiente ventana, nos aparecer√° un resumen de lo que hayamos configurado antes de crear el controlador de dominio.

![Revisar opciones](Imagenes/Ej1_10.png)

Aqu√≠, se har√° una comprobaci√≥n antes de instalarlo todo. Vemos que al final de la comprobaci√≥n, tenenemos un ‚úÖ. Ahora procedemos a instalarlo.

![Comprobaci√≥n de requisitos](Imagenes/Ej1_11.png)

Cuando se haya instalado, se reiniciar√° el equipo de manera autom√°tica cuando haya acabado.  
Podemos ver ahora que al iniciar sesi√≥n, podemos ver el dominio.

![Inicio de sesi√≥n](Imagenes/Ej1_12.png)

## üìå 2. Dise√±o de la Estructura de Unidades Organizativas (UO)
Estructura que se va a seguir:

---

- **`IES San Andres`**
  - **`Alumnado`**
    - `Informatica`
      - `DAM`
      - `DAW`
      - `ASIR`
      - `SMR`
      - `IAyBD`
    - `Administracion`
      - `AFI`
      - `GAD`
      - `SCO`
  - **`Profesorado`**
    - `Informatica`
    - `Administracion`
  - **`Personal_PAS`**
  - **`_Grupos`**
  - **`_Equipos`**
    - `Aulas_Informatica`
    - `Aulas_Administracion`
    - `Despachos`

---

> üí¨ En el ejercicio, aparece que `Profesorado` aparece al lado de `SCO`. Tendr√≠a que estar como en `Alumnados` para tener dentro a los grupos de `Informatica` y `Administracion`.

Para hacer todo esto, vamos a ir a **Herramientas** y **Usuarios y equipos de Active Directory**.

![Usuarios y equipos AD](Imagenes/Ej2.png)

Una vez dentro, haremos clic derecho en nuestro dominio y ah√≠ crearemos a la unidad organizativa principal.

Creamos la **Unidad Organizativa principal**, que ser√° `IES San Andres`.

![UO principal](Imagenes/Ej2_1.png)

Ahora, crearemos lo que queda de la estructura dentro de esta Unidad Organizativa haciendo m√°s Unidades Organizativas para meter m√°s adelante grupos o usuarios.

Cuando tengamos toda la estructura, nos quedar√° de la siguiente manera:

![UO creadas](Imagenes/Ej2_2.png)

Todas se han creado como la Unidad Organizativa principal, con la opci√≥n de **Proteger contenedor contra eliminaci√≥n accidental** que en caso de borrarla sin querer, nos salga un aviso.

## üìå 3. Creaci√≥n de Usuarios y Grupos
### 1. Crear Usuarios:
Para este ejercicio, crearemos usuarios para los grupos, es decir, poblar la Unidad Organizativa.  
Vamos a crear los siguientes usuarios:  
- Dos usuarios para `ASIR` (alu_asir_1, alu_asir_2)
- Dos usuarios para `AFI` (alu_afi_1, alu_afi_2)
- Un usuario para `Profesorado/Informatica` (prof_info_1)
- Un usuario para `Personal_PAS` (pas_1)

Creamos a los usuarios dentro de las Unidades Organizativas que pide el ejercicio.  
Hacemos clic derecho `Nuevo ‚Üí Usuario`.  
Pondremos los siguientes datos para crearlos. Todos los usuarios van a tener de contrase√±a **`Admin2025`**.

![Nombre de usuario](Imagenes/Ej3.png)

![Contrase√±a de usuario](Imagenes/Ej3_1.png)

En este apartado, se muestra un resumen de c√≥mo quedar√≠a nuestro usuario antes de crearlo.

![Resumen del usuario](Imagenes/Ej3_2.png)

Cuando tengamos a los usuarios creados, tendremos lo siguiente:

- ASIR

![ASIR](Imagenes/Ej3_3.png)

- AFI

![AFI](Imagenes/Ej3_4.png)

- Profesorado/Informatica

![Profesor](Imagenes/Ej3_5.png)

- Personal_PAS

![Personal_PAS](Imagenes/Ej3_6.png)

### 2. Crear grupos de Seguridad:
Vamos a crear los siguientes grupos de seguridad dentro de la Unidad Organizativa de `_Grupos`.  
Los grupos que vamos a a√±adir son:  
- GRP_Alumnos_DAM
- GRP_Alumnos_AFI
- GRP_Profesores_Informatica
- GRP_Personal_PAS
- GRP_Alumnos_General (Un grupo que contendr√° a todos los alumnos)
- GRP_Profesores_General (Un grupo que contendr√° a todos los profesores)

Para crear grupos, hacemos clic derecho `Nuevo ‚Üí Grupo`.

Solo tendremos que poner un nombre y poner la siguiente configuraci√≥n:

![Crear grupos](Imagenes/Ej3_7.png)

Al final, tendremos lo siguiente:

![Grupos](Imagenes/Ej3_8.png)

### 3. Asignar Miembros:
- A√±adimos a los usuarios que hemos creado a sus respectivos grupos.
- Hacer que `GRP_Alumnos_DAM` y `GRP_Alumnos_AFI` pertenezcan al grupo de `GRP_Alumnos_General`.

Para a√±adir a un usuario, podemos hacer doble clic y vemos directamente las propiedades del usuario, vamos a la pesta√±a de **Miembro de** y en **Agregar...** podemos hacer clic en **Opciones avanzadas** y buscar entre todo o poner directamente el nombre del grupo.

![A√±adir grupo](Imagenes/Ej3_9.png)

Cuando lo tengamos a√±adido, tendremos lo siguiente:

![Grupo a√±adido](Imagenes/Ej3_10.png)

Ahora metemos el resto de usuarios creados en sus grupos.  
Cuando los tengamos a todos, podemos ir a los grupos y hacer doble clic para ver las propiedades del grupo e ir a la pesta√±a de **Miembros** y vemos los miembros que contiene.  
Solo se pondr√°n capturas de los grupos donde hayan usuarios a√±adidos.

- AFI

![Grupo AFI](Imagenes/Ej3_11.png)

- Profesores_Informatica

![Grupo Profes_Info](Imagenes/Ej3_12.png)

- Personal_PAS

![Grupo PAS](Imagenes/Ej3_13.png)

- Alumnos_General

![Grupo Alumnos_General](Imagenes/Ej3_14.png)

- Profesores_General

![Grupo Profesores_General](Imagenes/Ej3_15.png)

Ahora, vamos a a√±adir los grupos de `GRP_Alumnos_DAM` y `GRP_Alumnos_AFI` para que sean miembros del grupo `GRP_Alumnos_General`.  
Para ello, tenemos que hacer igual que con los usuarios.

Cuando ya tengamos los grupos a√±adidos, volvemos a `Propiedades ‚Üí Miembros` y veremos que se han a√±adido los grupos.

![Grupos en grupo](Imagenes/Ej3_16.png)

## üìå 4. Restricci√≥n de Horas de Inicio de Sesi√≥n
Para que un usuario tenga un uso limitado durante cierto tiempo. Tenemos que ir a `"Propiedades del usuario" ‚Üí Cuenta ‚Üí Horas de inicio de sesi√≥n` y ah√≠ pondremos manualmente las horas que queramos que el usuario est√© conectado. En este caso, ser√° de los usuarios que hemos creado que tengan un horario **de 8:00 a 15:00 de lunes a viernes**.

Pondremos un ejemplo pero se aplicar√° a todos los usuarios.  
> üí¨ Tengo que ir uno por uno porque al seleccionar varios usuarios no aparece la opci√≥n deseada.

![Horario para alu_asir_1](Imagenes/Ej4.png)

![Horario para alu_asir_2](Imagenes/Ej4_1.png)

![Horario para alu_afi_1](Imagenes/Ej4_2.png)

![Horario para alu_afi_2](Imagenes/Ej4_3.png)

---
### [‚¨ÖÔ∏è Volver a UT04](../index.md)
---