# üìÑ PR0608: Comparaci√≥n de listas

## üìå 1. Objetivo
Eres administrador de sistemas Windows. Microsoft acaba de publicar un bolet√≠n de seguridad cr√≠tico debido a una vulnerabilidad "Zero-Day".  
Tu jefe te ha pasado dos listas en formato texto:
1. **La lista oficial** de los parches (KBs) que *deber√≠an* estar instalados para estar protegidos.
2. **La lista real** extra√≠da de un servidor cr√≠tico (`SRV-PRODUCCION`) con los parches que tiene instalados actualmente.

Tu objetivo es crear un script que compare ambas listas y te diga exactamente **qu√© parches faltan** para poder instalarlos manualmente.

## üìå 2. Datos de entrada
```powershell
# Lista de parches CR√çTICOS requeridos por el bolet√≠n de seguridad
$kbsRequeridos = @("KB500123", "KB409999", "KB890830", "KB500556", "KB500321", "KB999999")

# Lista de parches INSTALADOS actualmente en el servidor 
# Nota: Est√°n desordenados y podr√≠a haber parches viejos que no son cr√≠ticos.
$kbsInstalados = @("KB100000", "KB500556", "KB409999", "KB100001", "KB890830", "KB200022")
```

## üìå 3. Requerimientos t√©cnicos
### **Est√° preparado para copiar y pegar**
```powershell
$kbsRequeridos = @("KB500123", "KB409999", "KB890830", "KB500556", "KB500321", "KB999999")
$kbsInstalados = @("KB100000", "KB500556", "KB409999", "KB100001", "KB890830", "KB200022")

# Arrays vac√≠os
$kbsFaltantes = @()
$kbsExtra = @()

# Parches que faltan
foreach ($kbReq in $kbsRequeridos) {
    # Si el array de instalados NO contiene el requerido
    if ($kbsInstalados -notcontains $kbReq) {
        $kbsFaltantes += $kbReq
    }
}

# Parches extras
foreach ($kbInst in $kbsInstalados) {
    # Si el array de requeridos NO contiene el instalado
    if ($kbsRequeridos -notcontains $kbInst) {
        $kbsExtra += $kbInst
    }
}

# C√°lculos para el informe
$totalRequeridos = $kbsRequeridos.Count
$totalInstalados = $kbsInstalados.Count

# Calcular cu√°ntos requeridos s√≠ tenemos
$cumplidos = $totalRequeridos - $kbsFaltantes.Count

# Calcular porcentaje
$porcentaje = ($cumplidos / $totalRequeridos) * 100

# Textos unidos por comas o guiones
$txtFaltantes = $kbsFaltantes -join ", "
$txtExtras    = $kbsExtra -join " - "

Write-Host "=== AUDITOR√çA DE SEGURIDAD ==="
Write-Host "Total Requeridos: $totalRequeridos"
Write-Host "Total Instalados: $totalInstalados"
Write-Host ""
Write-Host "ESTADO DE CUMPLIMIENTO: $porcentaje%"
Write-Host ""
Write-Host "[URGENTE] Parches Faltantes:"
Write-Host $txtFaltantes
Write-Host ""
Write-Host "[INFO] Parches 'Extra' instalados (No cr√≠ticos):"
Write-Host $txtExtras
```

## üìå 4. Resultado esperado
```
=== AUDITOR√çA DE SEGURIDAD ===
Total Requeridos: 6
Total Instalados: 6

ESTADO DE CUMPLIMIENTO: 50%

[URGENTE] Parches Faltantes:
KB500123, KB500321, KB999999

[INFO] Parches 'Extra' instalados (No cr√≠ticos):
KB100000 - KB100001 - KB200022
```

---
### [‚¨ÖÔ∏è Volver a UT06](../index.md)
---