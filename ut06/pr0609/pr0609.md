# 游늯 PR0609: An치lisis carga procesador

## 游늷 1. Objetivo
El servidor de base de datos (`SRV-SQL-PROD`) se ha reiniciado inesperadamente esta madrugada. Tu jefe sospecha que el servidor se est치 quedando peque침o y que la CPU lleg칩 al 100% provocando el colapso.

El sistema de monitorizaci칩n ha volcado un **array de enteros** con el porcentaje de uso de CPU tomado cada 5 minutos durante la 칰ltima hora cr칤tica.

Tu objetivo ser치 escribir un script que analice esos datos crudos y genere un informe autom치tico para decidir si es necesario comprar m치s procesadores o si solo fue un error puntual.

## 游늷 2. Datos de entrada
```powershell
$muestrasCPU = @(15, 12, 18, 20, 45, 88, 95, 99, 100, 98, 55, 22, 15, 10, 12, 14, 95, 99, 100, 10)
```

## 游늷 3. Requerimientos t칠cnicos
### Est치 preparado para copiar y pegar
```powershell
$muestrasCPU = @(15, 12, 18, 20, 45, 88, 95, 99, 100, 98, 55, 22, 15, 10, 12, 14, 95, 99, 100, 10)

# Inicializaci칩n de variables acumuladoras
$sumaTotal = 0
$picoMaximo = 0
$incidentesCriticos = 0
$totalMuestras = $muestrasCPU.Count

# Recorremos el array muestra a muestra
foreach ($porcentaje in $muestrasCPU) {
    
    # Acumulamos la suma para calcular el promedio luego
    $sumaTotal += $porcentaje

    # Comprobamos si el valor actual supera al m치ximo registrado
    if ($porcentaje -gt $picoMaximo) {
        $picoMaximo = $porcentaje
    }

    # Contamos si es un incidente cr칤tico (> 90%)
    if ($porcentaje -gt 90) {
        $incidentesCriticos++
    }
}

# C치lculo final del promedio
$promedio = $sumaTotal / $totalMuestras

# Si el promedio es > 70% o hay m치s de 3 incidentes cr칤ticos
if ($promedio -gt 70 -or $incidentesCriticos -gt 3) {
    $mensajeDecision = "[RECOMENDACI칍N] NECESARIO UPGRADE DE HARDWARE"
} else {
    $mensajeDecision = "[RECOMENDACI칍N] FALSA ALARMA. EL SERVIDOR AGUANTA"
}

Write-Host "=== INFORME DE RENDIMIENTO ==="
Write-Host "Muestras analizadas: $totalMuestras"
Write-Host ""
Write-Host "RESULTADOS DEL AN츼LISIS:"
Write-Host "- Carga Promedio: $promedio %"
Write-Host "- Pico M치ximo: $picoMaximo %"
Write-Host "- Incidentes Cr칤ticos (>90%): $incidentesCriticos"
Write-Host ""
Write-Host "DIAGN칍STICO:"
Write-Host $mensajeDecision
```

## 游늷 4. Resultado esperado
```
=== INFORME DE RENDIMIENTO ===
Muestras analizadas: 20

RESULTADOS DEL AN츼LISIS:
- Carga Promedio: 51.1 %
- Pico M치ximo: 100 %
- Incidentes Cr칤ticos (>90%): 7

DIAGN칍STICO:
[RECOMENDACI칍N] NECESARIO UPGRADE DE HARDWARE
```

---
### [拘勇 Volver a UT06](../index.md)
---