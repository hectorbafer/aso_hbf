# üìÑ PR0701: Compartici√≥n de carpetas con Samba

## üìå Objetivo
1. Compartir 4 carpetas:
   - Gerencia, Administraci√≥n, Taller, P√∫blica
2. La empresa tendr√° 6 empleados:
   - ger01, adm01, adm02, tall01, tall02, tall03

Las carpetas ser√°n accesibles por los siguientes usuarios seg√∫n los siguientes criterios:
- Todos los empleados podr√°n acceder a la carpeta `P√∫blica` con permisos de lectura, mientras que el empleado `ger01` podr√° hacerlo con permisos de lectura y escritura.
- El empleado `ger01` podr√° acceder con todos los permisos a la carpeta `Gerencia`.
- Los empleados `adm01` y `adm02` tendr√°n acceso con todos los permisos a `Administraci√≥n` y con permisos de lectura √∫nicamente a la carpeta `Taller`.
- Los usuarios `tall01`, `tall02` y `tall03` tendr√°n acceso de lectura y escritura a la carpeta `Taller`.
- Cualquier usuario que no sea uno de los anteriores (invitado) podr√° acceder √∫nicamente a la carpeta `P√∫blica`.
- Los usuarios `ger01`, `adm01` y `adm02` usan **Windows**.
- Los usuarios `tall01`, `tall02` y `tall03` usan **Linux**.

## üìå Configuraci√≥n del entorno
Para la pr√°ctica prepararemos 3 m√°quinas virtuales con la siguiente configuraci√≥n:

| Host                 | IP           | M√°scara de subred | Puerta de enlace | Servidor DNS     |
| -------------------- | ------------ | ----------------- | ---------------- | ---------------- |
| `smb-hbf`            | 192.168.1.10 | 255.255.255.0 /24 | 192.168.1.1      | 8.8.8.8, 8.8.4.4 |
| `ClienteUbuntu-HBF`  | 192.168.1.20 | 255.255.255.0 /24 | 192.168.1.1      | 8.8.8.8, 8.8.4.4 |
| `ClienteWindows-HBF` | 192.168.1.30 | 255.255.255.0 /24 | 192.168.1.1      | 8.8.8.8, 8.8.4.4 |

Ahora pondremos las IPs est√°ticas en cada m√°quina virtual, en mi caso, he puesto en cada una de ellas dos adaptadores de red, uno en **red interna** y el otro en **puente**. As√≠ que configuramos la **red interna**.

### smb-hbf
> üí¨ Para esta m√°quina, me he conectado por **SSH** para poder copiar y pegar comandos en caso necesario.

Como en este caso es un Ubuntu Server, no tendremos entorno gr√°fico. Por lo que tendremos que editar el fichero de configuraci√≥n de red con el siguiente comando:
```bash
sudo nano /etc/netplan/00-installer-config.yaml
```

Pondremos lo siguiente:

![Config. red server](Imagenes/ipconfigS.png)

Aplicamos los cambios con `sudo netplan apply`. Para ver la IP pondremos `ifconfig`. Pero antes instalamos las `net-tools` con `sudo apt install net-tools`.

![ipS](Imagenes/ipS.png)

### ClienteUbuntu-HBF
Aqu√≠, tendremos un Ubuntu con entorno gr√°fico, por lo que podremos evitar el archivo de configuraci√≥n. Vamos a **Configuraci√≥n** e iremos al apartado de **Red**. Clicamos en la **ruleta** para configurar que en este caso es el primer adaptador de red `enp0s3`. Cuando estemos dentro, haremos lo siguiente:

![Config. red ubuntu](Imagenes/ipconfigL.png)

Veremos la IP con el comando `ifconfig`.

![ipL](Imagenes/ipL.png)

### ClienteWindows-HBF
Para Windows, pulsamos la combinaci√≥n de teclas `Win+X` y escribimos `ncpa.cpl`, hacemos clic derecho en el adaptador de red y clicamos en `Propiedades`. Luego, clicamos en `Protocolo de Internet versi√≥n 4 (TCP/IPv4)` y pondremos lo siguiente:

![Config. red windows](Imagenes/ipconfigW.png)

Miramos la IP con el comando `ipconfig /all`.

![ipW](Imagenes/ipW.png)

Por √∫ltimo, desactivamos el **Firewall** desde el **Panel de control**, yendo hacia `Sistema y seguridad ‚Üí Firewall de Windows Defender` y en la parte de la izquierda, clicamos en `Activar o desactivar el Firewall de Windows Defender`. Clicamos en `Desactivar Firewall de Windows Defender` tanto en `Redes privadas` como en `Redes p√∫blicas o invitadas`, aceptamos y ya est√° desactivado el Firewall.

![Firewall](Imagenes/Firewall.png)

## üìå Instalaci√≥n y configuraci√≥n de Samba


































---
### [‚¨ÖÔ∏è Volver a UT07](../index.md)
---