# ğŸ“„ PR0502: Carpetas personales y compartidas por un grupo

## ğŸ“Œ 1. CreaciÃ³n de usuarios y grupos
- Crea una carpeta personal para todos los alumnos de ASIR.

Creamos una carpeta para los alumnos de ASIR en `C:`. Le pondre el nombre de `ASIR_Alumnos`.

![Crear carpeta ASIR](Imagenes/Ej1.png)

Configuramos la carpeta para que solo los alumnos de **ASIR** puedan acceder a ella.  
Vamos a `Propiedades â†’ Compartir â†’ Uso compartido avanzado`.  
Activamos la casilla de **Compartir esta carpeta** y en **Permisos**, agregamos a los **alumnos de ASIR** y **Administradores** para que nosotros tengamos permisos. Ponemos a los dos con **Control total**.

![Control total](Imagenes/Ej1_1.png)

Una vez aplicado y guardado los cambios, en la carpeta nos aparecerÃ¡ una ruta que en mi caso es `\\HBF-WSERVER\ASIR_Alumnos`.

![Ruta acceso](Imagenes/Ej1_2.png)

Ya teniendo esto, clicamos en **Compartir...** y compartimos la carpeta con los **alumnos de ASIR** y les pondremos los permisos de **Lectura y escritura**.

![Compartir carpeta](Imagenes/Ej1_3.png)

Nos vamos a `Herramientas â†’ Usuarios y equipos de Active Directory`, buscamos a los alumnos, hacemos una selecciÃ³on mÃºltiple y vamos a las **Propiedades** con clic derecho.  
En la pestaÃ±a de **Perfil**, marcamos el checkbox de **Carpeta particular** y seleccionamos la opciÃ³n de **Ruta al acceso local** y pondremos la ruta absoluta de la carpeta, en mi caso es `C:\ASIR_Alumnos`.

![Ruta de acceso local](Imagenes/Ej1_4.png)

AsÃ­ ya tendremos la carpeta compartida con los **alumnos de ASIR**.

## ğŸ“Œ 2. Carpetas personales
- Instala el *Administrador de recursos del servidor de archivos* que estÃ¡ dentro del rol *Servicios de archivos y almacenamiento*.
- Utilizando la herramienta *Servicios de archivos y de almacenamiento* del *Administrador del servidor*, crea una carpeta para cada usuario dentro de `C:\shares` y realiza los pasos necesarios para que ambos usuarios puedan ver esta carpeta como una unidad de red identificada con la letra `H:`.
- Comprueba que la carpeta de cada usuario solo pueda ser accedida por Ã©l mismo.

Vamos a `Administrar â†’ Agregar roles y caracterÃ­sticas` y en los roles, desplegamos el rol de **Servicios de archivos y almacenamiento**. Luego, desplegamos en **Servicios de ISCSI y archivo** y por Ãºltimo, seleccionaremos para instalar `Administrador de recursos del servidor de archivos`.

![Agregar rol](Imagenes/Ej2.png)

Le damos todo a **Siguiente** y seleccionamos la opciÃ³n de **Reiniciar servicios en caso necesario**.  
Cuando ya lo tengamos instalado, en el menÃº de la izquierda del **Administrador del servidor**, tenemos una nueva secciÃ³n llamada **Servicio de archivos y almacenamiento**.

![Servicio de archivos](Imagenes/Ej2_1.png)

Al hacer clic, se abre otro menÃº al lado en el que clicaremos en **Recursos compartidos**. Ahora, para aÃ±adir un recurso compartido, hacemos clic derecho y **Nuevo recurso compartido**.

![Nuevo recurso compartido](Imagenes/Ej2_2.png)

Dejamos los valores por defecto excepto en ponerle el nombre, en mi caso, le pondrÃ© el nombre de **Compartir** porque el servicio utiliza de forma automÃ¡tica la carpeta `C:\shares`.

![Nombre recuros compartido](Imagenes/Ej2_3.png)

Cuando le demos a **Crear**, si no ha habido errores, nos aparecerÃ¡n dos tareas con el progreso completado.

![Recurso compartido creado](Imagenes/Ej2_4.png)

Para crear una carpeta que pertenezca a cada alumno, en vez de tener que crearlo manualmente, podemos hacer lo siguiente:  
Vamos a **Usuarios y equipos de Active Directory**, escogemos al alumno `alu_asir_1` y con doble clic vamos a las `Propiedades â†’ Perfil`. En **Carpeta particular**, clicamos en la opciÃ³n de **Conectar:**, pondremos la unidad `H:` y pondremos la ruta que en mi caso es `\\HBF-WSERVER\Compartir\%username%`.

> ğŸ’¬ `%username%` es el usuario que se va a utilizar, se pone asÃ­ en vez de poner el usuario completo.

![Conectar alu_asir_1](Imagenes/Ej2_5.png)

Hacemos lo mismo para `alu_asir_2`.

![Conectar alu_asir_2](Imagenes/Ej2_6.png)

Cuando ya lo tengamos, vamos a la carpeta que hemos creado y podremos ver las carpetas de los alumnos.

![Carpetas alumnos](Imagenes/Ej2_7.png)

### âœ… ComprobaciÃ³n
Para comprobar que haya funcionado correctamente, conectaremos un equipo Windows 10 (con un adaptador de red en *Host Only* y otro adaptador en *NAT*) a nuestro dominio. Primero comprobaremos que desde el equipo, hace `ping` al servidor, si lo hace, podremos conectarlo.  
Para conectarlo al dominio, vamos a tener que ir hacia `ConfiguraciÃ³n â†’ Sistema â†’ Acerca de` y en el menÃº de la derecha, clicamos en **ConfiguraciÃ³n avanzada del sistema**. Vamos a la pestaÃ±a de **Nombre de equipo** y clicamos en **Cambiar...**, ahÃ­ clicaremos en **Dominio:** y pondremos nuestro dominio que es `iessanandres.local`.

![Entrar en dominio](Imagenes/Ej2_8.png)

Al hacer clic, nos pedirÃ¡ unas credenciales, que son las del *administrador del servidor*. Cuando ya lo tengamos, tenemos que reiniciar el equipo.  
Una vez reiniciado el equipo, vamos a entrar con los alumnos `alu_asir_1` y `alu_asir_2`.

- alu_asir_1:

![alu_asir_1](Imagenes/Ej2_9.png)

- alu_asir_2:

![alu_asir_2](Imagenes/Ej2_10.png)

Para ver realmente si se ha conectado el equipo, vamos a **Usuarios y equipos de Active Directory** y en el dominio, al hacer clic en la carpeta de **Computers**, vemos que se ha conectado el equipo.

![Equipo conectado](Imagenes/Ej2_11.png)

## ğŸ“Œ 3. Carpetas compartidas por un grupo
- Crea en `C:\shares` una carpeta llamada `apuntes` y realiza las tareas necesarias para que los alumnos de ASIR puedan acceder a ella como un espacio de almacenamiento compartido con permiso de lectura.
- Luego crea otra llamada `prÃ¡ctica` en la que tengan permiso de lectura y escritura.

Dentro de la carpeta localizada en `C:\Shares`, creamos una carpeta llamada `Apuntes`. Vamos a las **Propiedades** de la carpeta, luego, a la pestaÃ±a de **Compartir**, clicamos en **Compartir...** y aÃ±adimos el grupo `GRP_Alumnos_ASIR` en el que tiene los alumnos como miembros del grupo.

> ğŸ’¬ Si el grupo no existe, lo creamos y metemos a los alumnos de ASIR.

![Meter GRP_Alumnos_ASIR](Imagenes/Ej3.png)

Para hacer que se automonte, tenemos que crear un archivo `.bat` que lo haremos en `\\localhost\NETLOGON`.

> ğŸ’¬ Podemos poner la direcciÃ³n en la barra de arriba y entrarÃ­amos directamente.

El archivo contiene la siguiente lÃ­nea:
```
net use I: \\HBF-WSERVER\Apuntes
```

> ğŸ’¬ Hay que poner una letra distinta porque si se vuelve a poner `H:` habrÃ­a conflicto y darÃ­a error.

![NETLOGON](Imagenes/Ej3_1.png)

Ahora, vamos a **Usuarios y equipos de Active Directory** y entramos en las **Propiedades** de los dos alumnos de `ASIR` e iremos a **Perfil**. En **Script de inicio de sesiÃ³n:**, pondremos el archivo `.bat` que hemos creado para que se automonte la carpeta para los alumnos.

![Script inicio de sesiÃ³n](Imagenes/Ej3_2.png)

Iniciamos sesiÃ³n con un usuario, por ejemplo, `alu_asir_1` y vamos al **Explorador de archivos** para ver si nos aparece la carpeta.

![Carpeta Apuntes](Imagenes/Ej3_3.png)

Creamos una nueva carpeta que se llamarÃ¡ `Practica` y haremos lo mismo, menos en el **Script de inicio de sesiÃ³n** porque se va a usar el mismo, y en el archivo `.bat` pondremos:
```
net use J: \\HBF-WSERVER\Practica
```

Y sÃ­, se puede usar el mismo archivo.

![Script](Imagenes/Ej3_4.png)

> ğŸ’¬ En el ejercicio al crear la carpeta pone que se tiene que llamar `prÃ¡ctica` pero al poner comandos no se reconocen las tildes.

Cuando ya tengamos todo configurado, nos quedarÃ¡ el Explorador de Archivos de la siguiente manera:

![Carpeta Practica](Imagenes/Ej3_5.png)

---
### [â¬…ï¸ Volver a UT05](../index.md)
---